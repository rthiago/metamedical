---
phase: 05-scroll-reveal-hero-animations
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [css/style.css, js/animations.js, index.html, empresa.html, produtos.html, localizacao.html, contato.html]
autonomous: true
requirements: [ANIM-01, ANIM-02, ANIM-03, HERO-03]

must_haves:
  truths:
    - "Elements below the fold fade in as the user scrolls down the page"
    - "Hero text and CTA button fade up with staggered timing on page load"
    - "With OS reduced-motion enabled, all animations are suppressed and content appears instantly"
    - "With JavaScript disabled, all content is visible — nothing is hidden or invisible"
  artifacts:
    - path: "js/animations.js"
      provides: "IntersectionObserver scroll reveal + JS-enabled class for progressive enhancement"
      min_lines: 15
    - path: "css/style.css"
      provides: "Reveal transition classes, hero keyframes, reduced-motion overrides"
      contains: ".js-enabled .reveal"
  key_links:
    - from: "js/animations.js"
      to: "css/style.css"
      via: ".js-enabled class on html element triggers CSS hidden states"
      pattern: "js-enabled"
    - from: "*.html"
      to: "js/animations.js"
      via: "script tag at end of body"
      pattern: "js/animations.js"
    - from: "*.html"
      to: "css/style.css"
      via: "reveal class on section containers"
      pattern: "class.*reveal"
---

<objective>
Add scroll-triggered reveal animations and hero entrance animation to all pages.

Purpose: Content below the fold animates into view on scroll, the hero entrance feels alive, and all animations degrade gracefully for accessibility and no-JS scenarios.
Output: js/animations.js created, CSS animation classes added to style.css, all 5 HTML pages updated with reveal classes and script tag.
</objective>

<execution_context>
@/home/thiago/.claude/get-shit-done/workflows/execute-plan.md
@/home/thiago/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-scroll-reveal-hero-animations/05-RESEARCH.md
@css/style.css
@index.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create animation CSS and JavaScript infrastructure</name>
  <files>css/style.css, js/animations.js</files>
  <action>
**Create `js/animations.js`** — a new file (first JS in the project):

```javascript
(function() {
  'use strict';
  document.documentElement.classList.add('js-enabled');
  if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;
  var observer = new IntersectionObserver(function(entries) {
    entries.forEach(function(entry) {
      if (entry.isIntersecting) {
        entry.target.classList.add('revealed');
        observer.unobserve(entry.target);
      }
    });
  }, { threshold: 0.15, rootMargin: '0px 0px -40px 0px' });
  document.querySelectorAll('.reveal').forEach(function(el) {
    observer.observe(el);
  });
})();
```

Key details:
- IIFE for no global pollution
- `js-enabled` class added synchronously — gates all hidden states
- `prefers-reduced-motion` check exits early — CSS handles visibility
- threshold 0.15 (15% visible triggers), rootMargin -40px (triggers slightly before fully in view)
- Elements reveal once and get unobserved (no re-trigger on scroll up)
- Use `var` and `.forEach` (no arrow functions) for maximum compat

**Add to `css/style.css`** — append BEFORE the responsive media queries section (before `/* Responsive — Mobile First */`):

1. **Scroll reveal classes:**
```css
/* Scroll Reveal */
.js-enabled .reveal {
  opacity: 0;
  transform: translateY(24px);
  transition: opacity 0.5s var(--transition-easing),
              transform 0.5s var(--transition-easing);
}

.js-enabled .reveal.revealed {
  opacity: 1;
  transform: translateY(0);
}
```

2. **Hero entrance keyframes:**
```css
/* Hero Entrance Animation */
@keyframes fadeUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.js-enabled .hero h1,
.js-enabled .hero .tagline,
.js-enabled .hero .btn {
  opacity: 0;
  animation: fadeUp 0.6s var(--transition-easing) forwards;
}

.js-enabled .hero h1 { animation-delay: 0.1s; }
.js-enabled .hero .tagline { animation-delay: 0.25s; }
.js-enabled .hero .btn { animation-delay: 0.4s; }
```

3. **Reduced motion overrides** — append at the END of the file (after all other rules):
```css
/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
  .js-enabled .reveal {
    opacity: 1;
    transform: none;
    transition: none;
  }

  .js-enabled .hero h1,
  .js-enabled .hero .tagline,
  .js-enabled .hero .btn {
    opacity: 1;
    animation: none;
  }
}
```

IMPORTANT: Only animate `opacity` and `transform` — these are GPU-composited properties. Do NOT animate layout properties (width, height, margin, padding).
  </action>
  <verify>
- `js/animations.js` file exists and contains IntersectionObserver setup
- `css/style.css` contains `.js-enabled .reveal` class
- `css/style.css` contains `@keyframes fadeUp`
- `css/style.css` contains `prefers-reduced-motion` media query
- No syntax errors: open index.html in browser, check console for errors
  </verify>
  <done>Animation infrastructure files created: JS handles observer + class toggling, CSS handles all visual transitions, reduced-motion query suppresses everything.</done>
</task>

<task type="auto">
  <name>Task 2: Add reveal classes and script tags to all HTML pages</name>
  <files>index.html, empresa.html, produtos.html, localizacao.html, contato.html</files>
  <action>
**For ALL 5 HTML pages**, add just before `</body>`:
```html
<script src="js/animations.js"></script>
```

**For each page, add `reveal` class to below-the-fold section containers:**

**index.html:**
- The `.section.section--alt` values section: add `reveal` to its `.container` child → `<div class="container reveal">`
- The `.section` products section: add `reveal` to its `.container` child → `<div class="container reveal">`
- Do NOT add reveal to the hero section (hero has its own entrance animation)

**empresa.html:**
- The `.section.section--alt` values section: add `reveal` to its `.container` child → `<div class="container reveal">`
- The first `.section` (institutional content) is above the fold on most screens, so do NOT add reveal to it

**produtos.html:**
- The `.section.section--alt` catalog CTA section: add `reveal` to its `.container` child → `<div class="container reveal">`
- The products grid section is the main content and likely above fold — do NOT add reveal

**localizacao.html:**
- Read the file first. Add `reveal` to any section container that appears below the fold (typically the map section or secondary content)

**contato.html:**
- Read the file first. Add `reveal` to any section container that appears below the fold (typically the contact cards grid)

**Rules:**
- Only add `reveal` to `.container` divs inside sections, not to the sections themselves (preserves background colors)
- Never add `reveal` to header, footer, or hero
- The `reveal` class goes alongside existing classes: `class="container reveal"`
  </action>
  <verify>
- All 5 HTML files have `<script src="js/animations.js"></script>` before `</body>`
- `index.html` has exactly 2 `.reveal` containers (values section, products section)
- `index.html` hero section has NO `.reveal` class
- grep for "reveal" across all HTML files to confirm correct placement
- Open each page in browser: below-fold content should animate in on scroll
  </verify>
  <done>All 5 pages load animations.js, below-fold sections have reveal class, hero section uses CSS keyframe entrance instead of scroll reveal.</done>
</task>

</tasks>

<verification>
1. **ANIM-01 (scroll reveal):** Open index.html, scroll down — values and products sections fade up into view
2. **ANIM-02 (reduced motion):** Enable reduced-motion in OS settings → reload page → all content appears instantly, no animations
3. **ANIM-03 (no-JS fallback):** Disable JavaScript in browser → reload → all content is visible, nothing hidden
4. **HERO-03 (hero entrance):** Open index.html → hero h1, tagline, and button fade up with staggered delays (0.1s, 0.25s, 0.4s)
5. **Cross-page:** Check empresa.html, produtos.html, localizacao.html, contato.html — all have working scroll reveals
6. **Console:** No JavaScript errors on any page
7. **Performance:** Animations are smooth (opacity + transform only, GPU-composited)
</verification>

<success_criteria>
- js/animations.js exists with IntersectionObserver scroll reveal
- CSS has .reveal/.revealed classes, @keyframes fadeUp, and prefers-reduced-motion override
- All 5 HTML pages load animations.js via script tag
- Below-fold sections on all pages fade in on scroll
- Hero text and CTA animate with staggered timing on page load (index.html only)
- Reduced-motion suppresses all animations
- No-JS shows all content immediately (no hidden elements)
</success_criteria>

<output>
After completion, create `.planning/phases/05-scroll-reveal-hero-animations/05-01-SUMMARY.md`
</output>
